<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content=" | The personal web site of Denis Papathanasiou">
    <meta name="author" content="Denis Papathanasiou">
    <title>Using Microsoft's Translator API with Python</title>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css">
    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap-theme.min.css">
    <link href="../css/my-blog.min.css" rel="stylesheet">
    <link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
    <link href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
    <link href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

    <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
    <!--[if lt IE 9]>
        <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
        <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->
</head>

<body>

  <a id="menu-toggle" href="#" class="btn btn-dark btn-lg toggle"><i class="fa fa-bars"></i></a>
  <nav id="sidebar-wrapper">
    <ul class="sidebar-nav">
      <a id="menu-close" href="#" class="btn btn-light btn-lg pull-right toggle"><i class="fa fa-times"></i></a>
      <li class="sidebar-brand"><a href="../" onclick="$('#menu-close').click();" >Denis Papathanasiou</a></li>
      <li class="sidebar-brand"><a href="../aikido.html" onclick="$('#menu-close').click();" >aikido</a></li>
      <li class="sidebar-brand"><a href="../hardware.html" onclick="$('#menu-close').click();" >hardware</a></li>
      <li class="sidebar-brand"><a href="../programming.html" onclick="$('#menu-close').click();" >programming</a></li>
      <li class="sidebar-brand"><a href="../random.html" onclick="$('#menu-close').click();" >random</a></li>
      <li class="sidebar-brand"><a href="../technology.html" onclick="$('#menu-close').click();" >technology</a></li>
      <li class="sidebar-brand"><a href="../#contacts" onclick="$('#menu-close').click();" >contact</a></li>
    </ul>
  </nav>


  <header class="intro-header" style="background-image: url('/img/source-code-bg.jpg')"> <!-- source: https://pixabay.com/en/source-code-code-programming-c-583537/ -->
    <div class="container">
      <div class="row">
	<div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
	  <div class="site-heading" style="color:#00ff00">
	    <h1>Using Microsoft's Translator API with Python</h1>
	    <hr class="small">
	    <h2 class="subheading"></h2>
	    <p class="post-meta"><i class="fa fa-calendar"></i> May 07, 2012</p>

	  </div>
	</div>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
</p><p>Before <a href="http://macaronics.com/" target="_blank">Macaronics</a>, I experimented with automated <a href="http://en.wikipedia.org/wiki/Machine_translation" target="_blank">machine translation</a>.

</p><p><a href="http://www.microsoft.com/" target="_blank">Microsoft</a> provides a <a href="http://www.microsofttranslator.com/Tools/" target="_blank">Translator API</a> which performs machine translation on any natural language text.

</p><p>Unlike <a href="http://googlecode.blogspot.com/2011/08/paid-version-of-google-translate-api.html" target="_blank">Google's paid Translation API</a>, Microsoft offers a <i>free</i> tier in theirs, for up to 2 million characters per month.

</p><p>I found the signup somewhat confusing, though, since I had to create more than one account and register for a couple of different services:

<ol>
<li>I had to register for a <a href="https://signup.live.com/" target="_blank">Windows Live ID</a>
</li><li>While logged in with my Live ID, I needed to create an account at the <a href="https://datamarket.azure.com/developer/applications/" target="_blank">Azure Data Market</a>
</li><li>Next, I had to go to the <a href="https://datamarket.azure.com/dataset/1899a118-d202-492c-aa16-ba21c33c06cb" target="_blank">Microsoft Translator Data Service</a> and pick a plan (I chose the free, 2 million characters per month option)
</li><li>Finally, I had to register an <a href="https://datamarket.azure.com/developer/applications" target="_blank">Azure Application</a> (since I was testing, I didn't want to use a public url, and fortunately that form accepted 'localhost', though it insisted on my using 'https' in the definition)
</li></ol>

<p>The last form, i.e., the Azure Application registration, provides two critical fields for API access:</p>

<ul>
<li>Client ID &mdash; this is any old string I want to use as an identifier (i.e., I choose it)
</li><li>Client Secret &mdash; this is provided by the form and cannot be changed
</li></ul>

<p>With all the registrations out of the way, it was time to try a few translations.</p>

<p>The <a href="http://msdn.microsoft.com/en-us/library/hh454950.aspx" target="_blank">technical docs</a> were well-written, but since there was nothing for <a href="http://python.org/" target="_blank">Python</a>, I've included an example for accessing the <a href="http://msdn.microsoft.com/en-us/library/ff512387.aspx" target="_blank">HTTP Interface</a>.</p>

<p><a href="https://gist.github.com/2790853" target="_blank">My code</a> is based on Doug Hellmann's article on <a href="http://www.doughellmann.com/PyMOTW/urllib2/" target="_blank">urllib2</a>, enhanced with Michael Foord's examples for <a href="http://www.voidspace.org.uk/python/articles/urllib2.shtml#handling-exceptions" target="_blank">error-handling urllib2 requests</a>.</p>

<p>Here's a simple usage example from Japanese to English, in the Python REPL:</p>
<code>
>>> import msmt<br />
>>> token = msmt.get_access_token(MY_CLIENT_ID, MY_CLIENT_SECRET)<br />
>>> msmt.translate(token, 'これはペンです', 'en', 'ja')<br />
&lt;string xmlns="http://schemas.microsoft.com/2003/10/Serialization/"&gt;This is a pen&lt;/string&gt;</code>

<p>The API returns XML, so a final processing step for a real program would be to use something like <a href="http://lxml.de/" target="_blank">lxml</a> to parse out the translation result.</p>

<p><a href="https://gist.github.com/2790864" target="_blank">Here's a snippet</a> for getting just the translated result out of the XML object returned by the API.</p>

<p>In the case of the example above, this is just the classic<sup>1</sup> phrase:</p>

<code>This is a pen</code>

<p>[1] It's classic in that "This is a pen" is the first English sentence Japanese students learn in school (or so I'm told)</p>

        <hr>
      </div>
    </div>
  </div>

  <hr>

  <!-- Footer -->
  <footer>
    <div class="container">
      <div class="row">
	<a name="contacts"></a>
	<div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
	  <ul class="list-inline text-center">
	    <li>
	      <a href="mailto:denis@papathanasiou.org">
		<span class="fa-stack fa-lg">
		  <i class="fa fa-circle fa-stack-2x"></i>
		  <i class="fa fa-envelope-o fa-stack-1x fa-inverse"></i>
		</span>
	      </a>
	    </li>
	    <li>
	      <a href="https://github.com/dpapathanasiou">
		<span class="fa-stack fa-lg">
		  <i class="fa fa-circle fa-stack-2x"></i>
		  <i class="fa fa-github fa-stack-1x fa-inverse"></i>
		</span>
	      </a>
	    </li>
	  </ul>
	</div>
      </div>
      <div class="row">
	<a name="license"></a>
	<div class="col-lg-8 col-lg-offset-2 col-md-10 col-md-offset-1">
	  <p class="copyright text-muted">
	    <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/"><img alt="Creative Commons License" style="border-width:0" src="https://i.creativecommons.org/l/by-nc-sa/4.0/88x31.png" /></a> &nbsp;
	    This site's content is licensed under <a rel="license" href="http://creativecommons.org/licenses/by-nc-sa/4.0/">Creative Commons (BY-NC-SA 4.0)</a>
	  </p>
	</div>
      </div>
    </div>
  </footer>

  <script src="//code.jquery.com/jquery-1.11.3.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
  <script src="../js/my-blog.min.js"></script>
  
</body>
</html>


